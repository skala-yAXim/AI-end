# 팀 주간 업무 보고서 생성 프롬프트
다음은 팀원들의 개별 주간 업무 보고서(JSON 형식) 및 WBS 데이터를 바탕으로, 팀 전체의 {start_date}부터 {end_date}까지의 주간 업무 현황에 대한 종합 보고서를 작성하는 지침입니다. 종합 보고서는 JSON 형식으로 작성해주세요.

### 팀 정보
- **팀 ID**: {team_id}
- **팀 이름**: {team_name}
- **팀 구성원**: {team_members}
- **팀 소개**: {team_description}
- **대상 기간**: {start_date} ~ {end_date}
- **프로젝트 ID**: {project_id}
- **프로젝트명**: {project_name}
- **프로젝트 기간**: {project_start_date} ~ {project_end_date}

## [입력 메타데이터]
### 팀원 개별 위클리 보고서 리스트
```json
{weekly_reports}
```

### WBS 작업 데이터
```json
{wbs_data}
```

### 저번 주 진행 상황
```json
{last_week_progress}
```

### 위클리 인풋 템플릿
```json
{weekly_input_template}
```

---

## [보고서 생성 지침]

### 1. team_weekly_report (팀 주간 업무 요약)

- "summary": 모든 팀원의 summary를 통합하여 팀 전체 관점에서 일주일 동안 어떤 작업이 이루어졌는지를 간결하게 요약합니다. 공통된 주요 작업, 달성한 목표, 병행된 프로젝트 등을 종합해 3~4문장으로 정리합니다. 수치 데이터가 존재하면 포함하되, **새로운 수치를 생성하지는 마세요**.

- "highlights": 팀 전체 업무 중 **주요 WBS와 매칭되는 모든 활동**을 작성합니다. 각 highlits 항목은 다음 형식을 따릅니다:

- "title": 작업 주제 또는 활동명 (예: "Git 기반 업무 파악 시스템 개발", "채팅 데이터 적재 파이프라인 구축")
  - **기본적으로는 WBS 상의 작업 항목을 기준으로 작성하되**,  
  - 팀원 개별 위클리 보고서에서 해당 활동을 설명할 때 사용된 표현이 있다면 이를 참고하여 **보다 직관적이고 현장감 있는 제목**으로 변환하여 작성합니다.
    - 예를 들어, WBS에는 "데이터 수집 자동화"로 되어 있어도, 위클리 보고서에서 여러 명이 "크롤러 개선", "데이터 수집 스케줄러 수정" 등으로 언급했다면, `"데이터 수집 스케줄러 개선 및 운영"`처럼 **위클리 기반 제목**을 작성합니다.

- "contributors": 이 작업에 기여한 팀원의 이름 목록
  다음은 contributors 판단 로직입니다.
  1. 해당 WBS 작업에 연결된 작업명(title)과 유사한 키워드가 Weekly Report 내에서 언급되는지 확인
  2. 작업명과 직접적으로 관련된 서술이 있을 경우에만 contributors로 포함
  3. 단순 언급만 있고 작업 내용이 없을 경우에는 제외
  ⚠️ 금지 규칙
  - **WBS에 존재하더라도, 위클리 보고서에서 언급이 없으면 contributors로 포함하지 마세요.**
  - 하이라이트 title은 WBS명을 그대로 쓰지 말고, 실제 Weekly에 언급된 표현을 반영해서 바꿔주세요.
  - progress_percentage는 LLM이 임의로 판단하지 말고, 반드시 **근거(reference)가 명확**해야 함.

- "summary": 이 작업의 주요 성과, 진행 내용, 의미 등을 간결한 서술 요약체로 작성. 팀 단위 협업 또는 연계 흐름이 드러나도록 구성.

- "progress_percentage": 해당 작업의 진척도를 0부터 100 사이의 정수로 표현합니다. 이 값은 다음 기준으로 산정합니다:
  - WBS 데이터에서 해당 작업의 계획 대비 실제 진행 상황을 기준으로 합니다.
  - 개인 위클리 보고서에서 언급된 진행 상황을 종합적으로 고려합니다.
  - 작업이 완료된 경우 100으로 표시합니다.
  - 작업이 시작되지 않은 경우 0으로 표시합니다.
  - 진행 중인 작업은 완료된 하위 작업의 비율을 고려하여 산정합니다.

- "llm_reference": 팀원 개별 위클리 보고서의 어떤 부분을 보고 summary와 progress_percentage를 산정하였고, 왜 그렇게 생각했는지를 서술합니다.

### 1.1 team_progress_overview (팀 진척도 개요)
- "title"은 "📊 팀 진척도 개요"로 고정합니다.

- "overall_progress": 팀 전체의 진척도를 0부터 100 사이의 정수로 표현합니다. 이 값은 다음 기준으로 산정합니다:
  - 주요 작업(highlights)의 진척도를 가중 평균하여 계산합니다.
  - WBS 데이터에서 해당 주간에 계획된 작업량 대비 실제 완료된 작업량의 비율을 고려합니다.
  - 팀원들의 개별 보고서에서 언급된 진행 상황을 종합적으로 반영합니다.

- "progress_by_category": 카테고리별 진척도를 표현합니다. WBS 데이터에서 작업 카테고리를 추출하고, 각 카테고리별로 진척도를 계산합니다. 각 카테고리는 다음 형식을 따릅니다:
  - "category_name": 작업 카테고리 이름 (예: "개발", "설계", "테스트" 등)
  - "progress_percentage": 해당 카테고리의 진척도 (0-100 사이의 정수)
  - "description": 해당 카테고리의 진행 상황에 대한 간략한 설명

---
### 2. team_weekly_reflection (팀 차원의 회고 및 개선점)
각 팀원의 Weekly 내용을 종합하여 팀 차원의 종합 회고를 작성합니다. (개인적인 회고는 포함하지 마세요.)

- "title"은 "🔍 팀 회고 및 다음 계획"으로 고정합니다.

- "content"는 리스트 형식이며 다음 항목들을 포함해야 합니다:
  - 긍정적인 점: 팀워크, 협업 흐름, 성과 등에서 긍정적으로 평가할 수 있는 점
  - 아쉬운 점: 작업 중 겪은 공통 문제, 중복 작업, 의사소통 부족 등
  - 개선 방향 및 계획: WBS 데이터 및 각 개인 보고서에 명시된 다음 주 작업을 기반으로, 팀 차원에서 어떤 계획과 정비가 필요한지 작성. 필요 시 날짜 포함 (괄호 안에 표기, 예: (06/10 ~))

- "next_week_schedule"은 리스트 형식이며 wbs_data에서 확인할 수 있는 다음주 작업 목록(`project_end_date` 이후 7일 간 일정)들을 나열해야 합니다.
- 각 작업은 다음 필드를 포함해야 합니다:
  - "task_id": WBS의 작업 ID
  - "task_name": 작업명
  - "start_date": 시작일 (YYYY-MM-DD 형식)
  - "end_date": 종료일 (YYYY-MM-DD 형식)
  - "description": 작업 설명 (간단히)
- 작업이 없는 경우 빈 배열 []로 설정합니다.

---
### Weekly SHORT REVIEW 작성 지침

### **목적**: 팀 대시보드용 "이번 주 팀 한줄평" - 팀 업무 정리 + 객관적 평가 + 생산적 피드백을 위한 유쾌한 메시지 생성

### **작성 규칙**:

- **80자 내외** (대시보드 UI 최적화)
- **칭찬 + 조언/격려**: 핵심 팀 성과 정리 및 칭찬 + 생산적 피드백
- **말투**: **우리 팀의 재치있는 ENFP PM** 페르소나를 바탕으로 어조를 구사해주세요. 짧고 간결하며 유쾌한 **한 문장**으로 한 주를 정리해주세요. 이모티콘을 활용하면 더욱 좋습니다.
- **형식**: `[이번 주 주요 성과] + [칭찬/재치 표현] + [개선 방향 or 다음 주 포인트]`

## 목적
- 팀 대시보드에 노출될 짧고 유쾌한 주간 요약 문장
- 팀 성과를 긍정적으로 요약하면서, 위트 있게 개선 방향도 제안
- 팀장이 한 문장으로 팀원들의 이번 주 업무 내용과 개선점을 확인할 수 있도록 함

---
### Weekly Report Markdown 작성 지침
- 마크다운 구성은 `weekly_input_template` 형식을 최대한 반영하여 작성합니다.
- 템플릿과 **정확히 똑같은 구성**으로 작성해야 합니다.
- 마크다운 파일로 저장하였을 때 바로 변환이 가능하도록 **실제 MarkDown 포맷**으로 작성해야 합니다.

- `weekly_input_template` 이 **없다면** 다음 지침을 참고하세요. **템플릿이 존재할 경우에는 다음 지침을 참고하지 않습니다.**
  - **프로젝트명, 개요, 기간, 진행사항, 차주 계획을 포함**합니다.
  - 어조는 '~입니다.' 대신 '~ 구현', '~ 완료' 형태로 작성합니다.
  - 팀명은 제목(`##`)으로, 프로젝트명은 부제목(`###`)으로 작성합니다.
  - 프로젝트가 여러개라면, **프로젝트 별로** 개요, 기간, 진행사항, 차주 계획을 작성합니다.
  - 기간에는 프로젝트의 기간을 작성합니다.
  - 개요에는 해당 프로젝트에서 한 주 동안 진행된 내용, 즉, Weekly에 포함된 내용을 1 ~ 2줄로 요약한 내용을 보고 형식으로 작성합니다.
  - 진행사항에는 이번주차에서 진행한 업무들을 개조식으로 작성합니다.
  - 차주 계획에는 해당 프로젝트의 WBS에 명시된 차주 일정(`project_end_date` 이후 일정)을 개조식으로 작성합니다.
---
**중요 사항**
모든 내용은 제공된 팀원 Weekly 보고서 데이터와 WBS 작업 데이터를 기반으로 작성하세요.

- team_weekly_report의 content는 한 주간의 활동을 종합하여 구체적이고 상세하게 작성하세요.

- team_weekly_report의 content 내 contributors는 WBS 작업 데이터와 상관없이 **개인 위클리 보고서를 기반으로만** 참여한 사람을 판단하여 작성하세요.

- team_weekly_reflection 섹션을 통해 한 주간의 업무에 대한 개인적 성찰과 다음 계획을 포함하세요. **다음 계획은 WBS 작업 데이터를 바탕으로 날짜와 함께 명시해주세요.**

완전한 JSON 형식으로 출력하세요. (추가 설명이나 마크다운 없이)

---
## [출력 JSON 템플릿]
다음 JSON 구조를 따라 완전한 보고서 데이터를 작성해주세요:
{{
  "report_title": "{team_name}의 {start_date} ~ {end_date} 팀 주간 업무 보고서",
  "team_weekly_report": [
    {{
      "project_id": "{project_id}",
      "project_name": "{project_name}",
      "summary": "팀 프로젝트 단위의 진척도 위주로 요약 (예시: 이번 주 팀은 Git 기반 업무 파악 시스템 개발 및 데이터 적재 파이프라인 개선 작업을 중점적으로 수행함. Git, 이메일, Teams 데이터에 대한 전처리 및 통합 분석 흐름이 구축되었으며, 신규 기능의 코드 반영 및 테스트도 병행됨. 일부 작업은 데이터 부족 및 커뮤니케이션 부재로 지연되었으나 전반적인 진척은 긍정적이었음.)",
      "highlights": [
        {{
          "title": "(예시: Git 기반 업무 파악 시스템 개발)",
          "contributors": ["노건표", "김세은"],
          "summary": "(예시: git analyzer 및 wbs analyzer 통합 작업을 진행하고, 핵심 분석 에이전트를 구현함. Git 데이터 기반 업무 추적 자동화 방향을 실험적으로 검증함.)",
          "progress_percentage": 75,
          "llm_reference": "위 내용을 작성한 근거를 작성"
        }},
        {{
          "title": "(예시: 채팅 데이터 적재 파이프라인 구축)",
          "contributors": ["김세은", "이승현"],
          "summary": "(예시: Teams 채팅 데이터를 전처리하고 VectorDB에 적재하는 과정을 설계 및 구현. 일정 기간의 데이터가 누락되는 이슈를 발견하고 처리 절차 개선 필요함.)",
          "progress_percentage": 60,
          "llm_reference": "위 내용을 작성한 근거를 작성"
        }}
      ],
      "team_progress_overview": {{
        "overall_progress": "지난 progress 값을 참고하여 전체 프로젝트 업무 진행도 숫자 형태로 표시",
        "llm_reference": "위 내용을 작성한 근거를 작성"
      }}
    }},
  ],
  "team_weekly_reflection": {{
    "content": [
      "(예시: 여러 데이터 소스를 기반으로 각 분석 에이전트가 안정적으로 작동하게 되어, 분석 자동화 기반이 탄탄해지고 있음.)",
      "(예시: 일부 WBS task가 팀 내 커뮤니케이션 없이 진행되어, 작업 누락이나 중복 이슈가 발생한 점은 아쉬움.)",
      "(예시: 다음 주에는 WBS 기반으로 작업 우선순위 조정 및 공유 프로세스를 명확히 할 예정)"
    ],
    "next_week_schedule": [
      "wbs_data에서 확인할 수 있는 차주 완료되어야 하는 작업 목록들을 나열"
    ]
  }},
  "weekly_short_review": "금주 핵심 팀 업무를 바탕으로 객관적 평가 및 생산적인 피드백에 대한 한줄평 (80-120자)",
  "weekly_report_md": "weekly_input_template과 유사한 템플릿 형식으로 MarkDown 코드로 작성된 보고서를 출력"
}}

### 중요!
weekly_report_md 을 뽑을때는 **weekly_input_template을 최대한 반영**하고자 노력해야함.
**개요**는 진행중인 프로젝트의 내용을 요약 하는 형태로 진행.
템플릿 중 목록으로 추가할만한 내용이 있으면 최대한 반영하여 추가.

<!-- TODO 

  키값 맞춰서 프롬프트 예시 및 설명 수정
  테스트 할 때 daily, weekly가 있어야 함.
  highlights.title 과 같은 레벨에 status 넣어서 지연, 순조, 빠름 표시

 -->